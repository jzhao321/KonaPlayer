(()=>{"use strict";var e;!function(e){e.STARTED="VIDEO_PLAYBACK_STARTED",e.ENDED="VIDEO_PLAYBACK_ENDED"}(e||(e={}));const t=e,n=function(e){var n=this;this.render=function(e){var t=document.querySelector(e);n.elements.videoElement.autoplay=n.config.autoPlay,n.elements.videoElement.muted=n.config.mute,n.elements.videoElement.controls=!0,n.elements.sourceElement.setAttribute("src",n.config.mediaItems[n.state.videoIndex].streamUrl),n.elements.sourceElement.setAttribute("type","video/webm"),t.appendChild(n.elements.videoElement),n.elements.videoElement.appendChild(n.elements.sourceElement)},this.play=function(e){e&&(n.elements.videoElement.currentTime=e),n.elements.videoElement.play()},this.pause=function(){n.elements.videoElement.pause()},this.nextItem=function(){n.config.mediaItems.length>1&&n.config.loop&&n.config.continuousPlay?(n.state.videoIndex>=n.config.mediaItems.length-1?n.state.videoIndex=0:n.state.videoIndex+=1,n.elements.sourceElement.src=n.config.mediaItems[n.state.videoIndex].streamUrl,n.elements.videoElement.load(),n.config.continuousPlay&&n.elements.videoElement.play()):n.config.loop&&n.play()},this.subscribe=function(e,t){n.state.callbackArray[e]&&Array.isArray(n.state.callbackArray[e])&&n.state.callbackArray[e].push(t),n.state.callbackArray[e]=[t]},this._runCallbacks=function(e){var t;null!==(t=n.state.callbackArray[e])&&void 0!==t||n.state.callbackArray[e].forEach((function(e){e()}))},this.config=e,this.state={callbackArray:{},started:!1,videoIndex:0},this.elements={videoElement:document.createElement("video"),sourceElement:document.createElement("source")},this.elements.videoElement.addEventListener("play",(function(){n._runCallbacks(t.STARTED)})),this.elements.videoElement.addEventListener("ended",(function(){n._runCallbacks(t.ENDED),n.nextItem()}))};document.addEventListener("DOMContentLoaded",(function(){var e=new n({autoPlay:!1,loop:!0,mediaItems:[{streamUrl:"http://techslides.com/demos/sample-videos/small.mp4"},{streamUrl:"https://ve.media.tumblr.com/tumblr_q1qj23CdxU1rv6iid_480.mp4"}],mute:!0,continuousPlay:!0});e.subscribe(t.STARTED,(function(){console.log("Started playback")})),e.subscribe(t.ENDED,(function(){console.log("Ended playback")})),e.render("#root");var o=document.createElement("button"),l=document.createElement("button"),a=document.createElement("button");o.id="play",o.textContent="Play",o.onclick=function(){e.play()},l.id="pause",l.textContent="Pause",l.onclick=function(){e.pause()},a.id="nextitem",a.textContent="Next Item",a.onclick=function(){e.nextItem()};var i=document.querySelector("#buttons");i.appendChild(o),i.appendChild(l),i.appendChild(a)}),!1)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb25hcGxheWVyLy4vc3JjL2VudW1zL0tvbmFQbGF5ZXJFdmVudHMuZW51bS50cyIsIndlYnBhY2s6Ly9rb25hcGxheWVyLy4vc3JjL2NsYXNzZXMvS29uYVBsYXllci50cyIsIndlYnBhY2s6Ly9rb25hcGxheWVyLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbIktvbmFQbGF5ZXJFdmVudCIsInBsYXllckNvbmZpZyIsInJlbmRlciIsInNlbGVjdG9yIiwiZGl2VG9SZW5kZXJJbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVsZW1lbnRzIiwidmlkZW9FbGVtZW50IiwiYXV0b3BsYXkiLCJjb25maWciLCJhdXRvUGxheSIsIm11dGVkIiwibXV0ZSIsImNvbnRyb2xzIiwic291cmNlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm1lZGlhSXRlbXMiLCJzdGF0ZSIsInZpZGVvSW5kZXgiLCJzdHJlYW1VcmwiLCJhcHBlbmRDaGlsZCIsInBsYXkiLCJzdGFydFBvc2l0aW9uIiwiY3VycmVudFRpbWUiLCJwYXVzZSIsIm5leHRJdGVtIiwibGVuZ3RoIiwibG9vcCIsImNvbnRpbnVvdXNQbGF5Iiwic3JjIiwibG9hZCIsInN1YnNjcmliZSIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwiY2FsbGJhY2tBcnJheSIsIkFycmF5IiwiaXNBcnJheSIsInB1c2giLCJfcnVuQ2FsbGJhY2tzIiwiZXZlbnQiLCJmb3JFYWNoIiwiaW5zdGFuY2UiLCJ0aGlzIiwic3RhcnRlZCIsImNyZWF0ZUVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicGxheWVyIiwiY29uc29sZSIsImxvZyIsInBsYXlCdXR0b24iLCJwYXVzZUJ1dHRvbiIsIm5leHRJdGVtQnV0dG9uIiwiaWQiLCJ0ZXh0Q29udGVudCIsIm9uY2xpY2siLCJidXR0b25EaXYiXSwibWFwcGluZ3MiOiJtQkFBQSxJQUFLQSxHQUFMLFNBQUtBLEdBQ0gsbUNBQ0EsK0JBRkYsQ0FBS0EsTUFB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QVlFLEdBQUssUUFDakJGLEVBQVlHLFlBQWMsUUFDMUJILEVBQVlJLFFBQVUsV0FDcEJSLEVBQU90QixTQUlUMkIsRUFBZUMsR0FBSyxXQUNwQkQsRUFBZUUsWUFBYyxZQUM3QkYsRUFBZUcsUUFBVSxXQUN2QlIsRUFBT3JCLFlBR1QsSUFBTThCLEVBQVluRCxTQUFTQyxjQUFjLFlBRXpDa0QsRUFBVW5DLFlBQVk2QixHQUN0Qk0sRUFBVW5DLFlBQVk4QixHQUN0QkssRUFBVW5DLFlBQVkrQixNQUNyQixJIiwiZmlsZSI6ImtvbmEtcGxheWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZW51bSBLb25hUGxheWVyRXZlbnR7XG4gIFNUQVJURUQgPSAnVklERU9fUExBWUJBQ0tfU1RBUlRFRCcsXG4gIEVOREVEID0gJ1ZJREVPX1BMQVlCQUNLX0VOREVEJ1xufVxuXG5leHBvcnQgZGVmYXVsdCBLb25hUGxheWVyRXZlbnQ7XG4iLCJpbXBvcnQgeyBDb25maWdUeXBlIH0gZnJvbSAnQGludGVyZmFjZXMvY29uZmlnLmludGVyZmFjZSc7XG5pbXBvcnQgS29uYVBsYXllckV2ZW50IGZyb20gJ0BlbnVtcy9Lb25hUGxheWVyRXZlbnRzLmVudW0nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLb25hUGxheWVyIHtcbiAgc3RhdGU6IHtcbiAgICBjYWxsYmFja0FycmF5OiB7XG4gICAgICBba2V5OiBzdHJpbmddOiAoKCkgPT4gdm9pZClbXVxuICAgIH0sXG4gICAgc3RhcnRlZDogYm9vbGVhbixcbiAgICB2aWRlb0luZGV4OiBudW1iZXJcbiAgfVxuXG4gIGNvbmZpZzogQ29uZmlnVHlwZTtcblxuICBlbGVtZW50czoge1xuICAgIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCxcbiAgICBzb3VyY2VFbGVtZW50OiBIVE1MU291cmNlRWxlbWVudCxcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHBsYXllckNvbmZpZzogQ29uZmlnVHlwZSkge1xuICAgIHRoaXMuY29uZmlnID0gcGxheWVyQ29uZmlnO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjYWxsYmFja0FycmF5OiB7fSxcbiAgICAgIHN0YXJ0ZWQ6IGZhbHNlLFxuICAgICAgdmlkZW9JbmRleDogMCxcbiAgICB9O1xuICAgIHRoaXMuZWxlbWVudHMgPSB7XG4gICAgICB2aWRlb0VsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyksXG4gICAgICBzb3VyY2VFbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKSxcbiAgICB9O1xuICAgIHRoaXMuZWxlbWVudHMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLl9ydW5DYWxsYmFja3MoS29uYVBsYXllckV2ZW50LlNUQVJURUQpO1xuICAgIH0pO1xuICAgIHRoaXMuZWxlbWVudHMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5fcnVuQ2FsbGJhY2tzKEtvbmFQbGF5ZXJFdmVudC5FTkRFRCk7XG4gICAgICB0aGlzLm5leHRJdGVtKCk7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIgPSAoc2VsZWN0b3I6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGRpdlRvUmVuZGVySW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxEaXZFbGVtZW50PihzZWxlY3Rvcik7XG5cbiAgICAvLyBWaWRlbyBFbGVtZW50XG4gICAgdGhpcy5lbGVtZW50cy52aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0aGlzLmNvbmZpZy5hdXRvUGxheTtcbiAgICB0aGlzLmVsZW1lbnRzLnZpZGVvRWxlbWVudC5tdXRlZCA9IHRoaXMuY29uZmlnLm11dGU7XG4gICAgdGhpcy5lbGVtZW50cy52aWRlb0VsZW1lbnQuY29udHJvbHMgPSB0cnVlO1xuXG4gICAgLy8gU291cmNlIEVsZW1lbnRcbiAgICB0aGlzLmVsZW1lbnRzLnNvdXJjZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLmNvbmZpZy5tZWRpYUl0ZW1zW3RoaXMuc3RhdGUudmlkZW9JbmRleF0uc3RyZWFtVXJsKTtcbiAgICB0aGlzLmVsZW1lbnRzLnNvdXJjZUVsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3ZpZGVvL3dlYm0nKTtcblxuICAgIC8vIFJlbmRlcmluZyBWaWRlbyBFbGVtZW50c1xuICAgIGRpdlRvUmVuZGVySW4uYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy52aWRlb0VsZW1lbnQpO1xuICAgIHRoaXMuZWxlbWVudHMudmlkZW9FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudHMuc291cmNlRWxlbWVudCk7XG4gIH1cblxuICBwbGF5ID0gKHN0YXJ0UG9zaXRpb24/OiBudW1iZXIpOiB2b2lkID0+IHtcbiAgICBpZiAoc3RhcnRQb3NpdGlvbikge1xuICAgICAgdGhpcy5lbGVtZW50cy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBzdGFydFBvc2l0aW9uO1xuICAgIH1cbiAgICB0aGlzLmVsZW1lbnRzLnZpZGVvRWxlbWVudC5wbGF5KCk7XG4gIH1cblxuICBwYXVzZSA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLmVsZW1lbnRzLnZpZGVvRWxlbWVudC5wYXVzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJlaGF2aW9yIGFzIGludGVuZGVkOlxuICAgKiBJZiBvbmx5IDEgdmlkZW8gaXMgaW4gbWVkaWFJdGVtcyBhbmQgTG9vcCBpcyB0cnVlLCB3aWxsIHJlcGxheSB0aGUgdmlkZW9cbiAgICogSWYgb25seSAxIHZpZGVvIGlzIGluIG1lZGlhSXRlbXMgYW5kIExvb3AgaXMgZmFsc2UsIHdpbGwgc3RvcCBhZnRlciB2aWRlbyBlbmRzXG4gICAqIElmIGFueSB2aWRlbyBleGNlcHQgbGFzdCBpcyBwbGF5ZWQsIGFuZCBMb29wIGFuZCBDb250aW51b3VzIFBsYXkgaXMgdHJ1ZSwgd2lsbCBtb3ZlIG9uIHRvIG5leHQgdmlkZW9cbiAgICogSWYgYW55IHZpZGVvIGV4Y2VwdCBpcyBwbGF5ZWQsIGFuZCBMb29wIGFuZCBDb250aW51b3VzIFBsYXkgaXMgZmFsc2UsIHdpbGwgc3RvcCBhZnRlciB2aWRlb1xuICAgKiBJZiBsYXN0IHZpZGVvIGlzIHBsYXllZCwgYW5kIExvb3AgYW5kIENvbnRpbnVvdXMgUGxheSBpcyB0cnVlLCB3aWxsIGxvb3AgYmFjayB0byBmaXJzdCB2aWRlb1xuICAgKiBJZiBsYXN0IHZpZGVvIGlzIHBsYXllZCwgYW5kIExvb3AgYW5kIENvbnRpbnVvdXMgcGxheSBpcyBmYWxzZSwgd2lsbCBzdG9wIGFmdGVyIGxhc3QgdmlkZW9cbiAgICovXG4gIG5leHRJdGVtID0gKCk6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLmNvbmZpZy5tZWRpYUl0ZW1zLmxlbmd0aCA+IDEgJiYgdGhpcy5jb25maWcubG9vcCAmJiB0aGlzLmNvbmZpZy5jb250aW51b3VzUGxheSkge1xuICAgICAgLy8gQ2hlY2tzIGlmIHRoZSBpdCdzIHRoZSBsYXN0IHZpZGVvXG4gICAgICBpZiAodGhpcy5zdGF0ZS52aWRlb0luZGV4ID49IHRoaXMuY29uZmlnLm1lZGlhSXRlbXMubGVuZ3RoIC0gMSkge1xuICAgICAgICB0aGlzLnN0YXRlLnZpZGVvSW5kZXggPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZS52aWRlb0luZGV4ICs9IDE7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZWxlbWVudHMuc291cmNlRWxlbWVudC5zcmMgPSB0aGlzLmNvbmZpZy5tZWRpYUl0ZW1zW3RoaXMuc3RhdGUudmlkZW9JbmRleF0uc3RyZWFtVXJsO1xuXG4gICAgICB0aGlzLmVsZW1lbnRzLnZpZGVvRWxlbWVudC5sb2FkKCk7XG5cbiAgICAgIC8vIFBsYXlzIHRoZSBuZXcgdmlkZW8gaW1tZWRpYXRlbHkgaWYgY29udGludW91c1BsYXkgaXMgdHJ1ZVxuICAgICAgdGhpcy5jb25maWcuY29udGludW91c1BsYXkgJiYgdGhpcy5lbGVtZW50cy52aWRlb0VsZW1lbnQucGxheSgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWcubG9vcCkge1xuICAgICAgdGhpcy5wbGF5KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgY2FsbGJhY2sgZnVuY3Rpb24sIGFuZCBhZGRzIGl0IHRvIGFuIGFycmF5IG9mIGNhbGxiYWNrIGZ1bmN0aW9ucyB0aGF0IHRyaWdnZXJzXG4gICAqIHdoZW4gYSBzcGVjaWZpYyBldmVudCBvY2N1cnNcbiAgICogQHBhcmFtIGV2ZW50TmFtZSBFdmVudCB0byBzdWJzY3JpYmUgdG9cbiAgICogQHBhcmFtIGNhbGxiYWNrIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGV2ZW50IG9jY3Vyc1xuICAgKi9cbiAgc3Vic2NyaWJlID0gKGV2ZW50TmFtZTogS29uYVBsYXllckV2ZW50LCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLnN0YXRlLmNhbGxiYWNrQXJyYXlbZXZlbnROYW1lXSAmJiBBcnJheS5pc0FycmF5KHRoaXMuc3RhdGUuY2FsbGJhY2tBcnJheVtldmVudE5hbWVdKSkge1xuICAgICAgdGhpcy5zdGF0ZS5jYWxsYmFja0FycmF5W2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUuY2FsbGJhY2tBcnJheVtldmVudE5hbWVdID0gW2NhbGxiYWNrXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVjbnRpb24gdG8gZXhlY3V0ZSBjYWxsYmFjayBhcnJheXNcbiAgICogQHBhcmFtIGV2ZW50IEV2ZW50IElEIGZvciB3aGljaCBjYWxsYmFjayBhcnJheSB0byBleGVjdXRlXG4gICAqL1xuICBwcml2YXRlIF9ydW5DYWxsYmFja3MgPSAoZXZlbnQ6IEtvbmFQbGF5ZXJFdmVudCkgPT4ge1xuICAgIHRoaXMuc3RhdGUuY2FsbGJhY2tBcnJheVtldmVudF0gPz8gdGhpcy5zdGF0ZS5jYWxsYmFja0FycmF5W2V2ZW50XS5mb3JFYWNoKChpbnN0YW5jZSkgPT4ge1xuICAgICAgaW5zdGFuY2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IEtvbmFQbGF5ZXJFdmVudCBmcm9tICdAZW51bXMvS29uYVBsYXllckV2ZW50cy5lbnVtJztcbmltcG9ydCBLb25hUGxheWVyIGZyb20gJy4vY2xhc3Nlcy9Lb25hUGxheWVyJztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgY29uc3QgcGxheWVyID0gbmV3IEtvbmFQbGF5ZXIoe1xuICAgIGF1dG9QbGF5OiBmYWxzZSxcbiAgICBsb29wOiB0cnVlLFxuICAgIG1lZGlhSXRlbXM6IFtcbiAgICAgIHtcbiAgICAgICAgc3RyZWFtVXJsOiAnaHR0cDovL3RlY2hzbGlkZXMuY29tL2RlbW9zL3NhbXBsZS12aWRlb3Mvc21hbGwubXA0JyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHN0cmVhbVVybDogJ2h0dHBzOi8vdmUubWVkaWEudHVtYmxyLmNvbS90dW1ibHJfcTFxajIzQ2R4VTFydjZpaWRfNDgwLm1wNCcsXG4gICAgICB9LFxuICAgIF0sXG4gICAgbXV0ZTogdHJ1ZSxcbiAgICBjb250aW51b3VzUGxheTogdHJ1ZSxcbiAgfSk7XG4gIHBsYXllci5zdWJzY3JpYmUoS29uYVBsYXllckV2ZW50LlNUQVJURUQsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnU3RhcnRlZCBwbGF5YmFjaycpO1xuICB9KTtcbiAgcGxheWVyLnN1YnNjcmliZShLb25hUGxheWVyRXZlbnQuRU5ERUQsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnRW5kZWQgcGxheWJhY2snKTtcbiAgfSk7XG4gIHBsYXllci5yZW5kZXIoJyNyb290Jyk7XG5cbiAgY29uc3QgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBjb25zdCBwYXVzZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBjb25zdCBuZXh0SXRlbUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuXG4gIC8vIFBsYXkgQnV0dG9uXG4gIHBsYXlCdXR0b24uaWQgPSAncGxheSc7XG4gIHBsYXlCdXR0b24udGV4dENvbnRlbnQgPSAnUGxheSc7XG4gIHBsYXlCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICBwbGF5ZXIucGxheSgpO1xuICB9O1xuXG4gIC8vIFBhdXNlIEJ1dHRvblxuICBwYXVzZUJ1dHRvbi5pZCA9ICdwYXVzZSc7XG4gIHBhdXNlQnV0dG9uLnRleHRDb250ZW50ID0gJ1BhdXNlJztcbiAgcGF1c2VCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICBwbGF5ZXIucGF1c2UoKTtcbiAgfTtcblxuICAvLyBOZXh0IEl0ZW0gQnV0dG9uXG4gIG5leHRJdGVtQnV0dG9uLmlkID0gJ25leHRpdGVtJztcbiAgbmV4dEl0ZW1CdXR0b24udGV4dENvbnRlbnQgPSAnTmV4dCBJdGVtJztcbiAgbmV4dEl0ZW1CdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICBwbGF5ZXIubmV4dEl0ZW0oKTtcbiAgfTtcblxuICBjb25zdCBidXR0b25EaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9ucycpO1xuXG4gIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChwbGF5QnV0dG9uKTtcbiAgYnV0dG9uRGl2LmFwcGVuZENoaWxkKHBhdXNlQnV0dG9uKTtcbiAgYnV0dG9uRGl2LmFwcGVuZENoaWxkKG5leHRJdGVtQnV0dG9uKTtcbn0sIGZhbHNlKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=